%link{:href => "http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css", :rel => "stylesheet"}/
%script{:src => "https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"}
%script{:src => "http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"}

- if @assignments.where(user_id: current_user.id).exists?
  %span= render 'punch_out'
- else
  %span= render 'punch_in'

%span
  %h3 Employees Currently Signed In
%table.table.table-hover
  %thead
    %tr
      %th User
      %th Location
      %th{:colspan => "3"}
  %tbody
    - @assignments.each do |assignment|
      - punched_user = User.find_by(id: assignment.user_id)
      %tr
        %td= "#{punched_user.last_name.titleize}, #{punched_user.first_name.titleize}"
        %td= Location.find_by(id: assignment.location_id).name
        %td= link_to '<button type="button" class="btn btn-default">Details</button>'.html_safe, assignment
